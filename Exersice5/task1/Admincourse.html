<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Admincourse.css">
    <title>Admin side Course</title>
</head>
<body>
    <div class="userpage"> 
        <div class="formdata">
       
        <form onsubmit="event.preventDefault();" autocomplete="off">      
         
          <!-- <label>Student Name</label> -->

         <a type="text" class="userfirstname"  placeholder="FirstName"> 
   
         <label>Course Name</label>
         <input type="text" class="userlastname"  placeholder="LastName" id="coursename">
   
         <div style="width:100%">
         <input type="submit"  value="Submit"  class="button">
       </div>
     </form>
    </div>
    <div class="display_table">
               <table class="list" id="userList">
                   <thead>
                       <tr>         
                         <!-- <th>Student Name</th> -->
                         <th>Course Name</th>
                         <th>Action</th>
                       </tr>
                   </thead>
                </table>
   </div>
   <p>Log-out Admin :
    <a href="#" class="btn btn-info btn-lg" onclick="logout()">
      <span class="log-out"></span> Log out
    </a>
  </p> 
   <script>
       // step :- 
    let selectedtr =  null;
    let button = document.querySelector('.button');
    button.addEventListener("click",user);


    // step :-2 // for call function and if condition logic
    function user()
    {
      let  transfer = readData()
            if(selectedtr== null)
            {
                insert(transfer);
            }
           else
           {
            update(transfer);
            selectedtr = null;
           }
           reset()
    }

    // step :3
    function readData()
    {
       let userread = [] // object is read data
      //  userread["StudentName"] = document.querySelector(".userfirstname").value;
       userread["CoursName"]  = document.querySelector(".userlastname").value;
      
      //  let student = JSON.parse(localStorage.getItem("signedUsers"));
      //  student.push();
      //  localStorage.setItem("signedUsers",JSON.stringify(student))



       return userread ; // return is  call the function user
    }
    // step 4
    function insert(P)   // about  insert data
    {
      console.log(P); 
      let table = document.querySelector(".list");
      let tr = table.insertRow(table.length);
      // let td1 = tr.insertCell(0);
      let td2 = tr.insertCell(0);
      let td3 = tr.insertCell(1);
      let td4 = tr.insertCell(2);
     
      // td1.innerHTML = P.StudentName;
      td2.innerHTML = P.CoursName;
      td3.innerHTML = "<button class='edt' onClick='Assaign(this)'>Assign</button>"  // .this for button find 
      td4.innerHTML = "<button class='rm' onClick='del(this)'>delete</button>";


      let signedUsers = JSON.parse(localStorage.getItem("signedUsers")) || [];

      let studentobj = 
       {
              studentname :P.StudentName,
              course: P.CoursName 
       };
              
      //  let signedcourse = JSON.parse(localStorage.getItem('signedUsers')) || [];
      
          
      signedUsers.push(studentobj);
       localStorage.setItem("signedUsers",JSON.stringify(signedUsers));
         console.log(signedUsers);
    
    }
    //  // step 5
      function reset()
     {
         document.querySelector('.userfirstname').value=" ";
        document.querySelector('.userlastname').value=" ";
     }
     // step 6
    //  function Edit(A)
    //  {
    //   console.log(A);
    //      selectedtr = A.parentElement.parentElement;  // find parents  of edit button td and tr
    //      document.querySelector('.userfirstname').value=selectedtr.cells[0].innerHTML; // selectedtr and find td
    //      document.querySelector('.userlastname').value=selectedtr.cells[1].innerHTML;
    //  }

     // for assaign course 
     function Assaign(A)
     {
       window.location.href="./Admin.html"
     }
     // step 7  
     function update(data)
     {
       console.log("userfirstname",data.FirstName)
      // selectedtr.cells[0].innerHTML = data.StudentName;
      selectedtr.cells[1].innerHTML= data.CoursName;
     }
     // step 8
     function del(dl)
     {
       let dlt = dl.parentElement.parentElement;
       dlt.remove();
       console.log(dlt);
     }

     function logout()
     {
       window.location.href="./signup.html"
     }
   </script>
</body>
</html>